---
title: 分布式领域CAP理论
date: 2018/9/20 22:22:22
tags:
  - blockchain
  - cap
  - distribution
categories: Distribution System
---



# 分布式领域CAP理论

Consistency(一致性)
    
>在分布式系统中的所有数据备份，在同一时刻是否同样的值。（等同于所有节点访问同一份最新的数据副本）。数据一致更新，所有数据变动都是同步的。

Availability(可用性)

>在集群中一部分节点故障后还能响应用户的读写请求。

Partition tolerance(分区容忍性)
    
>以实际效果而言，分区相当于对通信的时限要求，系统如果不能在一定时限内达成一致，意味着发生了分区（分叉）的情况，必须就当前操作在C和A之间做出选择。
<!-- more -->

CAP理论是说：在分布式存储系统中，最多只能实现以上两点。由于网络硬件肯定会出现延迟丢包等问题，所以分区容忍性是一定要实现的。因此剩下的一个在C和A之间做权衡。
传统数据库支持ACID：
>A 代表原子性，即事务执行是原子性的，事务中的操作要么全部执行，要么完全不执行；
>C 代表一致性，即事务执行过程中整个数据库的状态是一致的；
>I  代表隔离性，即两个事务不会互相影响，覆盖彼此数据等；
>D代表持久化，事务一旦完成，数据应该是被写到安全的、持久化的存储设备上。
## Consensus

共识是分布式系统中的基本问题。共识涉及多个服务器就价值达成一致，一旦他们就价值作出决定，该决定就是最终决定。
共识通常出现在复制状态机的上下文中，这是构建容错系统的一般方法。每个服务器都有一个状态机和一个日志。状态机是我们想要容错的组件，例如哈希表。即使群集中的少数服务器发生故障，客户端也会看到他们正在与单个可靠的状态机进行交互。每个状态机都从其日志中获取输入命令。在我们的哈希表示例中，日志将包含set x to 3之类的命令。使用一致性算法来同意服务器日志中的命令。一致性算法必须确保如果任何状态机将set x应用为3作为第n个命令，没有其他状态机将应用不同的第n 个命令。结果，每个状态机处理相同系列的命令，从而产生相同系列的结果并到达相同的一系列状态。
>日志类似于Action，状态机类似于Block&Chain。

区块链要解决的问题是：共识问题和CAP问题